{"version":3,"names":["PerformanceProfiler","metrics","startTime","frameTimestamps","bufferEvents","memorySnapshots","isEnabled","constructor","config","enabled","measurementInterval","thresholds","maxStartupTime","maxFirstFrameTime","maxMemoryUsage","minFPS","maxBufferingTime","start","Date","now","reset","console","log","stop","getEmptyMetrics","calculateMetrics","recordStartup","startupTime","warn","recordFirstFrame","firstFrameTime","recordFrame","push","length","shift","recordBuffering","isBuffering","time","recordMemoryUsage","memoryMB","averageFPS","calculateAverageFPS","bufferingTime","calculateBufferingTime","memoryUsage","calculateAverageMemory","bufferingEvents","filter","e","downloadSpeed","timeSpan","frameCount","fps","toFixed","totalBufferingTime","bufferStartTime","event","reduce","sum","memory","generateReport","trim","PerformanceUtils","measureTime","fn","label","result","duration","measureTimeAsync","debounce","func","wait","timeout","args","clearTimeout","setTimeout","throttle","limit","inThrottle","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","parseFloat","pow","calculateDownloadSpeed","bytesLoaded","timeElapsed"],"sourceRoot":"../../../src","sources":["utils/performance.ts"],"mappings":"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","ignoreList":[]}
